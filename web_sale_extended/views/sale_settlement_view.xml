<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
         <record id="report_subscription_settlement_tree" model="ir.ui.view">
            <field name="name">report.subscription.settlement.tree</field>
            <field name="type">tree</field>
            <field name="model">report.subscription.settlement</field>
            <field name="arch" type="xml">
                <tree string="Reporte de Liquidaciones" create="0" edit="0">
                    <field name="sale_order" />
                    <field name="subscription" />
                    <field name="invoice" />
                    <field name="policy_number" />
                    <field name="certificate_number" />
                    <field name="subscription_date_start" />
                    <field name="subscription_date_end" />
                    <field name="invoice_date" />
                    <field name="product_code" />
                    <field name="value" />
                    <field name="sponsor_id" />
                    <field name="payulatam_order_id" />
                    <field name="payulatam_state" />
                    <field name="payulatam_datetime" />
                    <field name="ap_name" />
                </tree>
            </field>
        </record>

        <record id="report_subscription_settlement_view_search" model="ir.ui.view">
            <field name="name">report.subscription.settlement.view.search</field>
            <field name="model">report.subscription.settlement</field>
            <field name="arch" type="xml">                
                <search>
                    <field name="policy_number" />
                    <field name="certificate_number" />
                    <filter string="APROBADO" name="filter_subscription_payulatam_state_approved" domain="[('payulatam_state','=', 'APPROVED')]"/>
                    <filter string="PENDIENTE" name="filter_subscription_payulatam_state_pending" domain="[('payulatam_state','=', 'PENDING')]"/>
                    <filter string="EXPIRADO" name="filter_subscription_payulatam_state_expired" domain="[('payulatam_state','=', 'EXPIRED')]"/>
                    <filter string="DECLINADO" name="filter_subscription_payulatam_state_declined" domain="[('payulatam_state','=', 'DECLINED')]"/>
                    <separator/>
                    <filter string="Fecha Inicio" name="filter_subscription_date_start" date="subscription_date_start"/>
                    <filter string="Fecha Final" name="filter_subscription_date_end" context="{'group_by': 'subscription_date_end'}"/>
                    <filter string="Fecha Liquidacion" name="filter_subscription_invoice_date" context="{'group_by': 'invoice_date'}"/>
                    <filter string="Fecha PayU" name="filter_subscription_payulatam_datetime" context="{'group_by': 'payulatam_datetime'}"/>
                </search>
            </field>
        </record>  

        <record model="ir.actions.act_window" id="action_report_subscription_settlement_tree">
            <field name="name">Reporte de Liquidaciones</field>
            <field name="res_model">report.subscription.settlement</field>
            <field name="view_mode">tree</field>
        </record>
    </data>
    <menuitem 
               id="report_subscription_settlement" 
               name="Reporte de Liquidaciones" 
               parent="sale_subscription.menu_sale_subscription_report" 
               sequence="5" 
               action="web_sale_extended.action_report_subscription_settlement_tree" 
               groups="sale_subscription.group_sale_subscription_view"/>
</odoo>